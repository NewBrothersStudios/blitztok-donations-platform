<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />


<!-- ✔ Google Site Verification (correctamente colocado) -->
<meta name="google-site-verification" content="vD1F80dNjXhWhgxG7U8fRYBPnhG6ThwzzU76gc9pDGc" />


<title>BlitzTok - Donate</title>
<style>
  :root{
    --bg:#050606;
    --card:#0f0f10;
    --accent:#00ff75;
    --muted:#9aa7a7;
    --glass: rgba(255,255,255,0.03);
    --white:#ffffff;
  }
  html,body{height:100%;margin:0;background:var(--bg);font-family:Inter, "Segoe UI", Arial, sans-serif;color:var(--white)}
  .app { max-width:480px; margin:0 auto; padding:18px; }

  header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:14px; }
  header h1{ margin:0; font-size:20px; color:var(--accent); text-shadow:0 0 8px #00ff7588; font-weight:900; }

  .balance { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:10px 14px; border-radius:12px; display:flex; align-items:center; gap:10px; box-shadow:0 8px 22px rgba(0,255,117,0.06); }
  .balance .label{font-size:12px;color:var(--muted); font-weight:700}
  .balance .amount{font-weight:900;color:#000;background:var(--accent);padding:8px 12px;border-radius:10px;font-size:15px}

  .list { display:flex; flex-direction:column; gap:14px; margin-top:10px; }

  .card{
    background:linear-gradient(180deg,var(--card), #0b0b0b);
    border-radius:16px;
    padding:14px;
    box-shadow:0 12px 26px rgba(0,0,0,0.6), 0 0 10px rgba(0,255,117,0.04);
    transition: transform .12s ease, box-shadow .12s;
    position:relative;
  }
  .card:active{ transform: translateY(-2px) }

  .card h1{ font-size:18px; margin:0 0 8px 0; color:var(--accent); font-weight:900; }

  .info{
    font-size:15px;
    color:#d7e7df;
    min-height:56px;
    margin-bottom:12px;
    border-radius:10px;
    padding:10px;
    background:var(--glass);
    line-height:1.2;
  }

  .controls{ display:flex; gap:10px; align-items:center; }
  .controls input[type="number"]{ width:55%; padding:12px 10px; border-radius:12px; border:1px solid rgba(255,255,255,0.04); background:#060606; color:#fff; font-weight:800; font-size:16px; }

  .btn { display:inline-block; background:var(--accent); color:#000; padding:12px 14px; border-radius:12px; font-weight:900; text-decoration:none; cursor:pointer; box-shadow:0 12px 28px rgba(0,255,117,0.08); transition: transform .12s, box-shadow .12s; border:none; font-size:15px; }
  .btn:active{ transform: translateY(1px) }
  .btn.ghost { background:transparent;color:var(--accent);border:1px solid rgba(0,255,117,0.12);font-weight:800; }

  .donation-meta{ margin-top:12px; font-size:13px; color:var(--muted); display:flex; justify-content:space-between; align-items:center; gap:8px; }

  .claimed-list{ margin-top:10px; font-size:13px; color:#bcdacb; background: rgba(0,0,0,0.14); padding:8px;border-radius:10px; max-height:120px; overflow:auto; }

  .keys-area{ margin-top:18px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:12px;border-radius:12px; display:flex; gap:10px; align-items:center; }
  .keys-area input{ flex:1; padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.04); background:#060606;color:#fff;font-weight:800;font-size:15px; }
  .keys-area .redeem-btn{ padding:12px 14px; font-size:15px }

  .overlay{ position:fixed; left:0; top:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.6); z-index:999; visibility:hidden; opacity:0; transition:.18s; }
  .overlay.show{ visibility:visible; opacity:1 }
  .overlay .modal{ background:#07110b; padding:18px; border-radius:12px; text-align:center; color:#fff; min-width:260px; box-shadow:0 18px 40px rgba(0,0,0,0.7); }

  footer{ margin-top:18px; font-size:13px; color:var(--muted); text-align:center }

  @media (min-width:481px){
    .app{ max-width:720px; }
    .controls input[type="number"]{ width:45%; }
  }
</style>
</head>
<body>
<div class="app" role="application" aria-label="BlitzTok donate app">
  <header>
    <h1>BlitzTok — plataforma de donaciones.</h1>
    <div class="balance" aria-live="polite" title="Blitz disponibles">
      <div class="label">Saldo</div>
      <div class="amount" id="saldoBox">0 BLITZ</div>
    </div>
  </header>

  <main>
    <div class="list" id="sectionsList" aria-live="polite"></div>

    <div class="keys-area" aria-label="Reclama tus Blitz">
      <input id="keyInput" placeholder="Ingresa tu key para reclamar Blitz" aria-label="Key">
      <button class="btn redeem-btn" id="redeemBtn">Reclamar</button>
    </div>

    <footer style="margin-top:12px;">
      <div style="color:var(--muted)">Si no tienes Blitz suficientes al donar, pulsa <strong>Comprar Blitz</strong> para recargar.</div>
      <div style="margin-top:8px;color:var(--muted)">Tu link de recarga: <a href="https://newbrothersstudios.github.io/BlitzTok-donate-to-people/" target="_blank" style="color:var(--accent)">Recargar Blitz</a></div>
    </footer>
  </main>
</div>

<div id="overlay" class="overlay" role="dialog" aria-modal="true">
  <div class="modal" id="overlayContent"></div>
</div>

<script>
const WHATSAPP_NUM = "50373826693";
const RECHARGE_URL = "https://newbrothersstudios.github.io/BlitzTok-donate-to-people/";

const KEY_VALUES = {
  "ABC1234BLITZ": 40,
  "KEY123BLITZ": 150,
  "KEYMICHBLITZ": 250,
  "Donateblitzkey": 445,
  "Donatedpeopleblitz": 1000,
  "KEYMIBROTHER": 9999
};

const LS_KEYS = {
  BALANCE: "bt_balance",
  DONATIONS: "bt_donations_by_section",
  KEYS_USED: "bt_keys_used",
  HISTORY: "bt_history"
};

function loadState(){
  return {
    balance: Number(localStorage.getItem(LS_KEYS.BALANCE) || 0),
    donations: JSON.parse(localStorage.getItem(LS_KEYS.DONATIONS) || "{}"),
    keysUsed: JSON.parse(localStorage.getItem(LS_KEYS.KEYS_USED) || "{}"),
    history: JSON.parse(localStorage.getItem(LS_KEYS.HISTORY) || "[]")
  };
}
function saveState(st){
  localStorage.setItem(LS_KEYS.BALANCE, String(st.balance));
  localStorage.setItem(LS_KEYS.DONATIONS, JSON.stringify(st.donations));
  localStorage.setItem(LS_KEYS.KEYS_USED, JSON.stringify(st.keysUsed));
  localStorage.setItem(LS_KEYS.HISTORY, JSON.stringify(st.history));
}

const overlay = document.getElementById("overlay");
const overlayContent = document.getElementById("overlayContent");
function showOverlay(html){ overlayContent.innerHTML = html; overlay.classList.add("show"); }
function hideOverlay(){ overlay.classList.remove("show"); }

let state = loadState();
updateBalanceUI();

const list = document.getElementById("sectionsList");

// Usuarios con input y botones
const USERS = [
  "Levi Efrain",
  "Jonathan Francisco",
  "Brian steven",
  "Cristian",
  "Fátima",
  "Anderson",
  "Steven arturo",
  "Nicolás"
];
const DESCRIPTIONS = [
  "Todavía no hay descripción",
  "Todavía no hay descripción",
  "Todavía no hay descripción",
  "Todavía no hay descripción",
  "Todavía no hay descripción",
  "HOLA, DONA PA LOS CHETOS",
  "Todavía no hay descripción",
  "Todavía no hay descripción"
];

// Secciones de donaciones manuales (solo mostrar)
const DONACIONES = [
  "Levi Efrain",
  "Jonathan Francisco",
  "Brian steven",
  "Cristian",
  "Fátima",
  "Anderson",
  "Steven arturo",
  "Nicolás"
];
const DON_DESCRIPTIONS = [
  "A Levi Efrain se le ha donado la cantidad de: 2 Blitz ",
  "A Jonathan Francisco se le ha donado la cantidad de: 0 Blitz ",
  "A brian Steven se le ha donado la cantidad de: 0 blitz",
  "A Cristian se le ha donado la cantidad de: 0 Blitz ",
  "A Fátima se le ha donado la cantidad de: 0 blitz",
  "A Anderson  se le ha donado la cantidad de: 49 Blitz ",
  "A Steven arturo se le ha donado la cantidad de: 0 Blitz ",
  "A Nicolás se le ha donado la cantidad de: 1 Blitz "
];

function createUserCard(i){
  const card = document.createElement("div");
  card.className = "card";
  card.dataset.index = i;
  card.innerHTML = `
    <h1>${USERS[i]}</h1>
    <div class="info">${DESCRIPTIONS[i]}</div>

    <div class="controls">
      <input type="number" min="1" placeholder="Cantidad BLITZ" class="donInput" aria-label="Cantidad a donar">
      <button class="btn donateBtn">Donar</button>
      <button class="btn ghost viewHistory">Historial</button>
    </div>

    <div class="donation-meta">
      <div class="donatedTot">Donado a este usuario: <strong>0</strong> BLITZ</div>
      <div style="font-size:13px;color:var(--muted)"> </div>
    </div>

    <div class="claimed-list" style="display:none"></div>
  `;
  list.appendChild(card);

  const totEl = card.querySelector(".donatedTot strong");
  totEl.textContent = Number(state.donations[i] || 0);

  refreshClaimed(card, i);

  const donateBtn = card.querySelector(".donateBtn");
  const input = card.querySelector(".donInput");
  const viewHistoryBtn = card.querySelector(".viewHistory");

  donateBtn.addEventListener("click", ()=>{
    const raw = Number(input.value || 0);
    if(!raw || raw <= 0){
      showOverlay(`<div class="modal"><div style="font-weight:800">Ingresa una cantidad válida.</div><div style="margin-top:12px"><button class="btn" onclick="hideOverlay()">Cerrar</button></div></div>`);
      return;
    }
    const amount = Math.floor(raw);
    attemptDonate(i, amount, card, USERS[i]);
  });

  viewHistoryBtn.addEventListener("click", ()=>{
    const items = (state.history || []).filter(h => h.section === i);
    if(!items.length){
      showOverlay(`<div class="modal"><div>No hay historial aún.</div><div style="margin-top:12px"><button class="btn" onclick="hideOverlay()">Cerrar</button></div></div>`);
      return;
    }
    const html = `<div class="modal"><div style="text-align:left;max-height:320px;overflow:auto;padding-right:8px">
      ${items.slice().reverse().map(it => {
        const d = new Date(it.time);
        return `<div style="padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.03)"><strong>+${it.amount} BLITZ</strong><div style="font-size:12px;color:var(--muted)">${d.toLocaleString()}</div></div>`;
      }).join("")}
    </div>
    <div style="margin-top:12px"><button class="btn" onclick="hideOverlay()">Cerrar</button></div></div>`;
    showOverlay(html);
  });
}

function createDonationCard(i){
  const card = document.createElement("div");
  card.className = "card";
  card.innerHTML = `
    <h1>${DONACIONES[i]}</h1>
    <div class="info">${DON_DESCRIPTIONS[i]}</div>
  `;
  list.appendChild(card);
}

// Crear 8 usuarios + 8 donaciones
for(let i=0;i<8;i++){
  createUserCard(i);
}
for(let i=0;i<8;i++){
  createDonationCard(i);
}

function updateBalanceUI(){ document.getElementById("saldoBox").textContent = `${state.balance || 0} BLITZ`; }

function refreshClaimed(cardEl, sectionIndex){
  const claimedList = cardEl.querySelector(".claimed-list");
  const items = state.history ? state.history.filter(h=>h.section===sectionIndex) : [];
  if(items.length){
    claimedList.style.display = "block";
    claimedList.innerHTML = items.slice(-5).reverse().map(it => {
      const d = new Date(it.time);
      return `<div style="padding:6px 0;border-bottom:1px solid rgba(255,255,255,0.03)"><strong>+${it.amount} BLITZ</strong><div style="font-size:12px;color:var(--muted)">${d.toLocaleString()}</div></div>`;
    }).join("");
  } else {
    claimedList.style.display = "none";
    claimedList.innerHTML = "";
  }
}

function attemptDonate(sectionIndex, amount, cardEl, username){
  state = loadState();
  if(amount > state.balance){
    showOverlay(`<div class="modal">
      <div style="font-weight:900;font-size:16px">No tienes Blitz suficientes</div>
      <div style="color:var(--muted);margin-top:8px">Saldo: ${state.balance} BLITZ — intentas donar: ${amount} BLITZ</div>
      <div style="display:flex;gap:10px;margin-top:14px;justify-content:center">
        <button class="btn" onclick="location.href='${RECHARGE_URL}'">Comprar Blitz</button>
        <button class="btn ghost" onclick="hideOverlay()">Cerrar</button>
      </div>
    </div>`);
    return;
  }

  state.balance -= amount;
  state.donations[sectionIndex] = (state.donations[sectionIndex]||0) + amount;
  state.history.push({ section: sectionIndex, amount, time: Date.now() });
  saveState(state);
  updateBalanceUI();

  const card = document.querySelector(`.card[data-index="${sectionIndex}"]`);
  if(card){
    const strong = card.querySelector(".donatedTot strong");
    strong.textContent = state.donations[sectionIndex];
    refreshClaimed(card, sectionIndex);
  }

  showOverlay(`<div class="modal"><div style="font-weight:900;font-size:16px">GRACIAS POR DONAR A ${username}</div><div style="color:var(--muted);margin-top:8px">Redirigiendo a WhatsApp...</div></div>`);

  setTimeout(()=> {
    hideOverlay();
    const text = encodeURIComponent(`Acabo de donar ${amount} BLITZ a ${username}`);
    window.open(`https://wa.me/${WHATSAPP_NUM}?text=${text}`, "_blank");
  }, 3000);
}

// Reclamar key
document.getElementById("redeemBtn").addEventListener("click", ()=>{
  const raw = (document.getElementById("keyInput").value || "").trim();
  if(!raw){ showOverlay(`<div class="modal"><div>Ingresa una key válida.</div><div style="margin-top:12px"><button class="btn" onclick="hideOverlay()">Cerrar</button></div></div>`); return; }
  const key = raw;
  state = loadState();
  if(state.keysUsed[key]){
    showOverlay(`<div class="modal"><div>Esta key ya fue usada en este navegador.</div><div style="margin-top:12px"><button class="btn" onclick="hideOverlay()">Cerrar</button></div></div>`);
    return;
  }
  const prize = KEY_VALUES[key];
  if(!prize){
    showOverlay(`<div class="modal"><div>Key inválida.</div><div style="margin-top:12px"><button class="btn" onclick="hideOverlay()">Cerrar</button></div></div>`);
    return;
  }
  state.balance += prize;
  state.keysUsed[key] = true;
  saveState(state);
  updateBalanceUI();
  document.getElementById("keyInput").value = "";
  showOverlay(`<div class="modal"><div style="font-weight:900">${prize} BLITZ agregados a tu saldo</div><div style="margin-top:12px"><button class="btn" onclick="hideOverlay()">Cerrar</button></div></div>`);
});

overlay.addEventListener("click", (e)=>{ if(e.target === overlay) hideOverlay(); });
</script>
</body>
</html>
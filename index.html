
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BlitzTok - Donate + Login</title>

<!-- CONFETTI -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<!-- SONIDOS -->
<audio id="donateSound" src="https://www.soundjay.com/buttons/sounds/button-09.mp3" preload="auto"></audio>
<audio id="redeemSound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3" preload="auto"></audio>

<style>
:root{
  --bg:#0a1f1f;
  --card:#0f2a2a;
  --accent:#00ffbc;              /* Verde turquesa principal */
  --accent-soft:#66ffe6;         /* Verde m√°s claro */
  --muted:#a0d8d8;
  --glass: rgba(0,255,200,0.08);
  --white:#ffffff;
  --ripple: rgba(0,255,188,0.3);
}
html,body{height:100%;margin:0;background:var(--bg);font-family:Inter, "Segoe UI", Arial, sans-serif;color:var(--white);overflow-x:hidden;}
.hidden{display:none;}
.app { max-width:480px; margin:0 auto; padding:18px; opacity:0; transform:translateY(20px); transition: opacity 0.6s ease, transform 0.6s ease; }
.app.show { opacity:1; transform:translateY(0); }
header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:14px; }
header h1{ margin:0; font-size:20px; color:var(--accent); text-shadow:0 0 12px rgba(0,255,188,0.6); font-weight:900; animation: glow 2s infinite alternate; }
@keyframes glow { from { text-shadow:0 0 8px rgba(0,255,188,0.4); } to { text-shadow:0 0 20px rgba(0,255,188,0.8); } }
.balance { background: linear-gradient(180deg, rgba(0,255,188,0.1), rgba(0,255,188,0.04)); padding:12px 16px; border-radius:14px; display:flex; align-items:center; gap:12px; box-shadow:0 8px 24px rgba(0,255,188,0.12); transition: transform 0.3s ease; }
.balance.pop { animation: pop 0.4s ease; }
@keyframes pop { 0% { transform:scale(1); } 50% { transform:scale(1.15); } 100% { transform:scale(1); } }
.balance .label{font-size:12px;color:var(--muted); font-weight:700}
.balance .amount{font-weight:900;color:#000;background:var(--accent);padding:10px 14px;border-radius:12px;font-size:16px; box-shadow:0 0 15px rgba(0,255,188,0.5);}
.list { display:flex; flex-direction:column; gap:16px; margin-top:10px; }
.card{ background:linear-gradient(180deg,var(--card), #0b2222); border-radius:18px; padding:16px; box-shadow:0 12px 30px rgba(0,0,0,0.6), 0 0 14px rgba(0,255,188,0.1); transition: all .2s ease; position:relative; overflow:hidden; }
.card:hover { transform:translateY(-4px); box-shadow:0 16px 40px rgba(0,0,0,0.7), 0 0 20px rgba(0,255,188,0.15); }
.card:active{ transform: translateY(-2px); }
.card h1{ font-size:19px; margin:0 0 10px 0; color:var(--accent-soft); font-weight:900; }
.info{ font-size:15px; color:#c0f0e6; min-height:56px; margin-bottom:14px; border-radius:12px; padding:12px; background:var(--glass); line-height:1.3; }
.controls{ display:flex; gap:12px; align-items:center; }
.controls input[type="number"]{ width:55%; padding:14px 12px; border-radius:14px; border:1px solid rgba(0,255,188,0.15); background:#0a1f1f; color:#fff; font-weight:800; font-size:16px; transition: border 0.3s; }
.controls input:focus { border-color:var(--accent); outline:none; box-shadow:0 0 10px rgba(0,255,188,0.3); }
.btn { position:relative; overflow:hidden; display:inline-block; background:var(--accent); color:#000; padding:14px 16px; border-radius:14px; font-weight:900; text-decoration:none; cursor:pointer; box-shadow:0 12px 30px rgba(0,255,188,0.2); transition: all .2s; border:none; font-size:15px; }
.btn:active{ transform: translateY(2px); }
.btn::after { content:''; position:absolute; top:50%; left:50%; width:0; height:0; background:var(--ripple); border-radius:50%; transform:translate(-50%,-50%); opacity:0; transition: all 0.6s; }
.btn.ripple::after { width:300px; height:300px; opacity:1; }
.btn.ghost { background:transparent;color:var(--accent-soft);border:2px solid rgba(0,255,188,0.3); }
.donation-meta{ margin-top:14px; font-size:13px; color:var(--muted); display:flex; justify-content:space-between; align-items:center; gap:8px; }
.keys-area{ margin-top:20px; background:linear-gradient(180deg, rgba(0,255,188,0.08), rgba(0,255,188,0.03)); padding:14px;border-radius:14px; display:flex; gap:12px; align-items:center; }
.keys-area input{ flex:1; padding:14px;border-radius:14px;border:1px solid rgba(0,255,188,0.15); background:#0a1f1f;color:#fff;font-weight:800;font-size:15px; }
.overlay{ position:fixed; left:0; top:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.8); z-index:999; visibility:hidden; opacity:0; transition:.3s; backdrop-filter:blur(4px); }
.overlay.show{ visibility:visible; opacity:1; }
.overlay .modal{ background:#0f2a2a; padding:24px; border-radius:18px; text-align:center; color:#fff; min-width:280px; box-shadow:0 20px 50px rgba(0,255,188,0.25); border:1px solid rgba(0,255,188,0.2); animation: modalPop 0.4s ease; }
@keyframes modalPop { from { transform:scale(0.8); opacity:0; } to { transform:scale(1); opacity:1; } }
footer{ margin-top:20px; font-size:13px; color:var(--muted); text-align:center; }
/* LOGIN */
#loginCard { max-width:400px; margin:40px auto; padding:24px; background:var(--card); border-radius:18px; text-align:center; box-shadow:0 16px 40px rgba(0,255,188,0.15); animation: modalPop 0.5s ease; }
#loginCard input{ width:84%; margin:10px 0; padding:14px; border-radius:14px; border:1px solid rgba(0,255,188,0.2); background:#0a1f1f; color:#fff; font-weight:800; }
#loginCard button{ width:88%; margin:12px 0; }
#loginCard h2{ margin-bottom:18px; color:var(--accent-soft); font-size:24px; }
#loginCard .error{ color:#ff6b6b; margin-top:8px; font-weight:700; }
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginCard">
  <h2>Iniciar sesi√≥n</h2>
  <input id="loginUser" placeholder="Nombre de usuario">
  <input id="loginPass" type="password" placeholder="Contrase√±a üîê">
  <button class="btn btn-main" onclick="login()">Entrar</button>
  <div id="loginError" class="error"></div>
</div>

<!-- APP PRINCIPAL -->
<div class="app" id="donateApp">
  <header>
    <h1>BlitzTok</h1>
    <div class="balance" id="balanceBox">
      <div class="label">Saldo</div>
      <div class="amount" id="saldoBox">0 BLITZ</div>
    </div>
  </header>

  <main>
    <div class="list" id="sectionsList"></div>

    <div class="keys-area">
      <input id="keyInput" placeholder="Ingresa tu key para reclamar Blitz">
      <button class="btn redeem-btn" id="redeemBtn">Reclamar</button>
    </div>

    <footer>
      <div>Si no tienes Blitz suficientes, pulsa <strong>Comprar Blitz</strong> para recargar.</div>
      <div style="margin-top:10px;">Link de recarga: <a href="https://newbrothersstudios.github.io/BlitzTok-donate-to-people/" target="_blank" style="color:var(--accent-soft)">Recargar Blitz</a></div>
    </footer>
  </main>
</div>

<div id="overlay" class="overlay">
  <div class="modal" id="overlayContent"></div>
</div>

<script>
// VOZ INTEGRADA (espa√±ol natural)
function hablar(texto) {
  if ('speechSynthesis' in window) {
    const utterance = new SpeechSynthesisUtterance(texto);
    utterance.lang = 'es-ES';
    utterance.rate = 1;
    utterance.pitch = 1;
    utterance.volume = 1;
    speechSynthesis.cancel();
    speechSynthesis.speak(utterance);
  }
}

// EFECTOS
function playSound(id) {
  const sound = document.getElementById(id);
  sound.currentTime = 0;
  sound.play().catch(() => {});
}
function vibrate() {
  if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
}
function confettiBlast() {
  confetti({
    particleCount: 100,
    spread: 70,
    origin: { y: 0.6 },
    colors: ['#00ffbc', '#66ffe6', '#ffffff', '#00d4aa']
  });
}
function popBalance() {
  const box = document.getElementById('balanceBox');
  box.classList.remove('pop');
  void box.offsetWidth;
  box.classList.add('pop');
}
function rippleEffect(e, btn) {
  btn.classList.add('ripple');
  setTimeout(() => btn.classList.remove('ripple'), 600);
}

/* LOGIN USERS */
const USERS = {
  "Levittochimi56": { pass:"leviti√±ochimino561", saldo:7 },
  "Jonathan9091":   { pass:"Jonansa812", saldo:46 },
  "Brianzmx17":     { pass:"Brianazx87", saldo:6 },
  "NicolAZX881":    { pass:"NICOA192", saldo:1 },
  "STEV172991":     { pass:"Stevnc8114", saldo:3 },
  "Andersxn2012":   { pass:"ANDERSXN9182", saldo:1000 }
};
let usuarioActual = null;

function login(){
  const user = document.getElementById('loginUser').value.trim();
  const pass = document.getElementById('loginPass').value.trim();
  const err = document.getElementById('loginError');
  if(!USERS[user] || USERS[user].pass !== pass){
    err.textContent = "Usuario o contrase√±a incorrectos";
    return;
  }
  usuarioActual = user;
  document.getElementById('loginCard').classList.add('hidden');
  document.getElementById('donateApp').classList.add('show');

  hablar(`Bienvenido ${user}`);

  setTimeout(updateBalanceUI, 100);
}

/* DATA */
const RECHARGE_URL = "https://newbrothersstudios.github.io/BlitzTok-donate-to-people/";
const KEY_VALUES = {
  "ABC1234BLITZ": 40, "KEY123BLITZ": 150, "KEYMICHBLITZ": 250,
  "Donateblitzkey": 445, "Donatedpeopleblitz": 1000, "KEYMIBROTHER": 9999
};

const LS_KEYS = { BALANCE: "bt_balance", DONATIONS: "bt_donations_by_section", KEYS_USED: "bt_keys_used", HISTORY: "bt_history" };

function loadState(){ return {
  balance: Number(localStorage.getItem(LS_KEYS.BALANCE) || 0),
  donations: JSON.parse(localStorage.getItem(LS_KEYS.DONATIONS) || "{}"),
  keysUsed: JSON.parse(localStorage.getItem(LS_KEYS.KEYS_USED) || "{}"),
  history: JSON.parse(localStorage.getItem(LS_KEYS.HISTORY) || "[]")
};}
function saveState(st){
  localStorage.setItem(LS_KEYS.BALANCE, String(st.balance));
  localStorage.setItem(LS_KEYS.DONATIONS, JSON.stringify(st.donations));
  localStorage.setItem(LS_KEYS.KEYS_USED, JSON.stringify(st.keysUsed));
  localStorage.setItem(LS_KEYS.HISTORY, JSON.stringify(st.history));
}

const overlay = document.getElementById("overlay");
const overlayContent = document.getElementById("overlayContent");
function showOverlay(html){ overlayContent.innerHTML = html; overlay.classList.add("show"); }
function hideOverlay(){ overlay.classList.remove("show"); }

let state = loadState();
const list = document.getElementById("sectionsList");

const USERS_LIST = ["Levi Efrain","Jonathan Francisco","Brian Steven","Cristian","F√°tima","Anderson","Steven Arturo","Nicol√°s"];
const DESCRIPTIONS = [
  "Donen pa la causa #noseacodosxd","Todav√≠a no tiene descripci√≥n.","Todav√≠a no tiene descripci√≥n.",
  "Todav√≠a no tiene descripci√≥n.","Todav√≠a no tiene descripci√≥n.","Donen pa los chetos.",
  "Todav√≠a no tiene descripci√≥n.","Todav√≠a no tiene descripci√≥n."
];

function createUserCard(i){
  const card = document.createElement("div");
  card.className = "card";
  card.dataset.index = i;
  card.innerHTML = `
    <h1>${USERS_LIST[i]}</h1>
    <div class="info">${DESCRIPTIONS[i]}</div>
    <div class="controls">
      <input type="number" min="1" placeholder="Cantidad BLITZ" class="donInput">
      <button class="btn donateBtn">Donar</button>
      <button class="btn ghost viewHistory">Historial</button>
    </div>
    <div class="donation-meta">
      <div class="donatedTot">Donado a este usuario: <strong>0</strong> BLITZ</div>
    </div>
  `;
  list.appendChild(card);

  const totEl = card.querySelector(".donatedTot strong");
  totEl.textContent = Number(state.donations[i] || 0);

  const donateBtn = card.querySelector(".donateBtn");
  const input = card.querySelector(".donInput");
  const viewHistoryBtn = card.querySelector(".viewHistory");

  donateBtn.addEventListener("click", (e) => { rippleEffect(e, donateBtn); 
    const raw = Number(input.value || 0);
    if(!raw || raw <= 0){ showOverlay(`<div class="modal"><div>Cantidad inv√°lida</div><div style="margin-top:16px"><button class="btn" onclick="hideOverlay()">OK</button></div></div>`); return; }
    attemptDonate(i, Math.floor(raw), USERS_LIST[i]);
  });

  viewHistoryBtn.addEventListener("click", (e) => { rippleEffect(e, viewHistoryBtn);
    const items = (state.history || []).filter(h => h.section === i);
    if(!items.length){ showOverlay(`<div class="modal"><div>No hay historial</div><div style="margin-top:16px"><button class="btn" onclick="hideOverlay()">OK</button></div></div>`); return; }
    const html = `<div class="modal"><div style="text-align:left;max-height:340px;overflow:auto;padding-right:8px">${items.slice().reverse().map(it => {
      const d = new Date(it.time); return `<div style="padding:10px 0;border-bottom:1px solid rgba(0,255,188,0.1)"><strong>+\( {it.amount} BLITZ</strong><div style="font-size:13px;color:var(--muted)"> \){d.toLocaleString()}</div></div>`;
    }).join("")}</div><div style="margin-top:16px"><button class="btn" onclick="hideOverlay()">Cerrar</button></div></div>`;
    showOverlay(html);
  });
}

for(let i=0;i<USERS_LIST.length;i++){ createUserCard(i); }

function updateBalanceUI(){ 
  const saldoBox = document.getElementById("saldoBox");
  if (saldoBox && usuarioActual && USERS[usuarioActual]) {
    saldoBox.textContent = USERS[usuarioActual].saldo + " BLITZ";
  }
}

function attemptDonate(sectionIndex, amount, username){
  if(amount > USERS[usuarioActual].saldo){
    showOverlay(`<div class="modal"><div>No tienes suficientes Blitz</div><div style="margin-top:10px">Saldo: \( {USERS[usuarioActual].saldo} ‚Äî Necesitas: \){amount}</div>
      <div style="display:flex;gap:12px;margin-top:18px;justify-content:center">
        <button class="btn" onclick="window.open('${RECHARGE_URL}','_blank')">Comprar Blitz</button>
        <button class="btn ghost" onclick="hideOverlay()">Cancelar</button>
      </div></div>`);
    return;
  }

  USERS[usuarioActual].saldo -= amount;
  state.donations[sectionIndex] = (state.donations[sectionIndex]||0) + amount;
  state.history.push({ section: sectionIndex, amount, time: Date.now() });
  saveState(state);
  updateBalanceUI();
  popBalance();

  const card = document.querySelector(`.card[data-index="${sectionIndex}"]`);
  if(card){ card.querySelector(".donatedTot strong").textContent = state.donations[sectionIndex]; }

  // EFECTOS √âPICOS + VOZ
  playSound('donateSound');
  vibrate();
  confettiBlast();
  hablar(`Donaste \( {amount} Blitz a \){username}`);

  showOverlay(`<div class="modal"><div style="font-size:24px">¬°DONADO!<br>+\( {amount} BLITZ a \){username} </div></div>`);

  // MENSAJE WHATSAPP √âPICO Y PERSONALIZADO
  setTimeout(()=> {
    hideOverlay();
    const mensaje = `üî• ¬°DONACI√ìN √âPICA EN BLITZTOK! üî•

\( {usuarioActual} acaba de mandarle \){amount} BLITZ a ${username.toUpperCase()} üò±üí•ü©µ

¬°El pana m√°s generoso del grupo! üëë

¬øQui√©n se anima a superar esta donaci√≥n? üöÄ

#BlitzTok #Donaci√≥nLegendaria`;
    const text = encodeURIComponent(mensaje);
    window.open(`https://wa.me/50373826693?text=${text}`, "_blank");
  }, 2200);
}

document.getElementById("redeemBtn").addEventListener("click", (e) => { rippleEffect(e, document.getElementById("redeemBtn"));
  const raw = (document.getElementById("keyInput").value || "").trim().toUpperCase();
  if(!raw){ showOverlay(`<div class="modal"><div>Ingresa una key</div><div style="margin-top:16px"><button class="btn" onclick="hideOverlay()">OK</button></div></div>`); return; }
  if(state.keysUsed[raw]){ showOverlay(`<div class="modal"><div>Key ya usada</div><div style="margin-top:16px"><button class="btn" onclick="hideOverlay()">OK</button></div></div>`); return; }
  const prize = KEY_VALUES[raw];
  if(!prize){ showOverlay(`<div class="modal"><div>Key inv√°lida</div><div style="margin-top:16px"><button class="btn" onclick="hideOverlay()">OK</button></div></div>`); return; }

  USERS[usuarioActual].saldo += prize;
  state.keysUsed[raw] = true;
  saveState(state);
  updateBalanceUI();
  popBalance();
  document.getElementById("keyInput").value = "";

  playSound('redeemSound');
  vibrate();
  confettiBlast();
  hablar(`Reclamaste ${prize} Blitz`);

  showOverlay(`<div class="modal"><div style="font-size:26px;font-weight:900">¬°+${prize} BLITZ! ü©µüí•</div><div style="margin-top:16px"><button class="btn" onclick="hideOverlay()">Genial</button></div></div>`);
});

overlay.addEventListener("click", (e)=>{ if(e.target === overlay) hideOverlay(); });

// Ripple en todos los botones
document.querySelectorAll('.btn').forEach(btn => {
  btn.addEventListener('click', (e) => {
    rippleEffect(e, btn);
  });
});
</script>

</body>
</html>